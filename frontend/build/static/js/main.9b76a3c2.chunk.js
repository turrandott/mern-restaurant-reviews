(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{64:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(29),r=c.n(s),i=c(13),l=c.n(i),o=c(9),d=c(17),j=c(4),u=c(8),b=c(2),h=(c(39),c(30)),m=c(31),O=c(32),v=c.n(O).a.create({baseURL:"http://localhost:5000/api/v1/restaurants",headers:{"Content-type":"application/json"}}),x=new(function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,[{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return v.get("?page=".concat(e))}},{key:"get",value:function(e){return v.get("/id/".concat(e))}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v.get("?".concat(t,"=").concat(e,"&page=").concat(c))}},{key:"createReview",value:function(e){return v.post("/review",e)}},{key:"updateReview",value:function(e){return v.put("/review",e)}},{key:"deleteReview",value:function(e,t){return v.delete("/review?id=".concat(e),{data:{user_id:t}})}},{key:"getCuisines",value:function(e){return v.get("/cuisines")}}]),e}()),p=c(0),f=function(e){var t="",c=!1;e.location.state&&e.location.state.currentReview&&(c=!0,t=e.location.state.currentReview.text);var a=Object(n.useState)(t),s=Object(j.a)(a,2),r=s[0],i=s[1],l=Object(n.useState)(!1),o=Object(j.a)(l,2),d=o[0],b=o[1];return Object(p.jsx)("div",{children:e.user?Object(p.jsx)("div",{className:"submit-form",children:d?Object(p.jsxs)("div",{children:[Object(p.jsx)("h4",{children:"You submitted successfully!"}),Object(p.jsx)(u.b,{to:"/restaurants/"+e.match.params.id,className:"btn btn-success",children:"Back to Restaurant"})]}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{htmlFor:"description",children:[c?"Edit":"Create"," Review"]}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"text",required:!0,value:r,onChange:function(e){i(e.target.value)},name:"text"})]}),Object(p.jsx)("button",{onClick:function(){var t={text:r,name:e.user.name,user_id:e.user.id,restaurant_id:e.match.params.id};c?(t.review_id=e.location.state.currentReview._id,x.updateReview(t).then((function(e){b(!0),console.log(e.data)})).catch((function(e){console.log(e)}))):x.createReview(t).then((function(e){b(!0),console.log(e.data)})).catch((function(e){console.log(e)}))},className:"btn btn-success",children:"Submit"})]})}):Object(p.jsx)("div",{children:"Please log in."})})},g=function(e){var t=Object(n.useState)({id:null,name:"",address:{},cuisine:"",reviews:[]}),c=Object(j.a)(t,2),a=c[0],s=c[1];Object(n.useEffect)((function(){var t;t=e.match.params.id,x.get(t).then((function(e){s(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))}),[e.match.params.id]);return Object(p.jsx)("div",{children:a?Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:a.name}),Object(p.jsxs)("p",{children:[Object(p.jsx)("strong",{children:"Cuisine: "}),a.cuisine,Object(p.jsx)("br",{}),Object(p.jsx)("strong",{children:"Address: "}),a.address.building," ",a.address.street,", ",a.address.zipcode]}),Object(p.jsx)(u.b,{to:"/restaurants/"+e.match.params.id+"/review",className:"btn btn-primary",children:"Add Review"}),Object(p.jsx)("h4",{children:" Reviews "}),Object(p.jsx)("div",{className:"row",children:a.reviews.length>0?a.reviews.map((function(t,c){return Object(p.jsx)("div",{className:"col-lg-4 pb-1",children:Object(p.jsx)("div",{className:"card",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsxs)("p",{className:"card-text",children:[t.text,Object(p.jsx)("br",{}),Object(p.jsx)("strong",{children:"User: "}),t.name,Object(p.jsx)("br",{}),Object(p.jsx)("strong",{children:"Date: "}),t.date]}),e.user&&e.user.id===t.user_id&&Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("a",{onClick:function(){return function(t,c){x.deleteReview(t,e.user.id).then((function(e){s((function(e){return e.reviews.splice(c,1),Object(o.a)({},e)}))})).catch((function(e){console.log(e)}))}(t._id,c)},className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"Delete"}),Object(p.jsx)(u.b,{to:{pathname:"/restaurants/"+e.match.params.id+"/review",state:{currentReview:t}},className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"Edit"})]})]})})},c)})):Object(p.jsx)("div",{className:"col-sm-4",children:Object(p.jsx)("p",{children:"No reviews yet."})})})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"No restaurant selected."})]})})},N=function(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(j.a)(r,2),l=i[0],o=i[1],d=Object(n.useState)(""),b=Object(j.a)(d,2),h=b[0],m=b[1],O=Object(n.useState)(""),v=Object(j.a)(O,2),f=v[0],g=v[1],N=Object(n.useState)(["All Cuisines"]),w=Object(j.a)(N,2),y=w[0],k=w[1];Object(n.useEffect)((function(){C(),R()}),[]);var C=function(){x.getAll().then((function(e){console.log(e.data),s(e.data.restaurants)})).catch((function(e){console.log(e)}))},R=function(){x.getCuisines().then((function(e){console.log(e.data),k(["All Cuisines"].concat(e.data))})).catch((function(e){console.log(e)}))},S=function(e,t){x.find(e,t).then((function(e){console.log(e.data),s(e.data.restaurants)})).catch((function(e){console.log(e)}))};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"row pb-1",children:[Object(p.jsx)("div",{className:"col-lg-4",children:Object(p.jsxs)("div",{className:"input-group",children:[Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by name",value:l,onChange:function(e){var t=e.target.value;o(t)}}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){S(l,"name")},children:"Search"})})]})}),Object(p.jsx)("div",{className:"col-lg-4",children:Object(p.jsxs)("div",{className:"input-group",children:[Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by zip",value:h,onChange:function(e){var t=e.target.value;m(t)}}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){S(h,"zipcode")},children:"Search"})})]})}),Object(p.jsx)("div",{className:"col-lg-4",children:Object(p.jsxs)("div",{className:"input-group",children:[Object(p.jsx)("select",{onChange:function(e){var t=e.target.value;g(t)},className:"form-control",children:y.map((function(e){return Object(p.jsxs)("option",{value:e,children:[" ",e.substr(0,20)," "]})}))}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){"All Cuisines"==f?C():S(f,"cuisine")},children:"Search"})})]})})]}),Object(p.jsx)("div",{className:"row",children:a.map((function(e){var t="".concat(e.address.building," ").concat(e.address.street,", ").concat(e.address.zipcode);return Object(p.jsx)("div",{className:"col-lg-4 pb-1",children:Object(p.jsx)("div",{className:"card",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{className:"card-title",children:e.name}),Object(p.jsxs)("p",{className:"card-text",children:[Object(p.jsx)("strong",{children:"Cuisine: "}),e.cuisine,Object(p.jsx)("br",{}),Object(p.jsx)("strong",{children:"Address: "}),t]}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)(u.b,{to:"/restaurants/"+e._id,className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"View Reviews"}),Object(p.jsx)("a",{target:"_blank",href:"https://www.google.com/maps/place/"+t,className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"View Map"})]})]})})})}))})]})},w=c(14),y=function(e){var t=Object(n.useState)({name:"",id:""}),c=Object(j.a)(t,2),a=c[0],s=c[1],r=function(e){var t=e.target,c=t.name,n=t.value;s(Object(o.a)(Object(o.a)({},a),{},Object(w.a)({},c,n)))};return Object(p.jsx)("div",{className:"submit-form",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"user",children:"Username"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"name",required:!0,value:a.name,onChange:r,name:"name"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"id",children:"ID"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"id",required:!0,value:a.id,onChange:r,name:"id"})]}),Object(p.jsx)("button",{onClick:function(){e.login(a),e.history.push("/")},className:"btn btn-success",children:"Login"})]})})};var k=function(){var e=a.a.useState(null),t=Object(j.a)(e,2),c=t[0],n=t[1];function s(){return r.apply(this,arguments)}function r(){return(r=Object(d.a)(l.a.mark((function e(){var t,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.length>0&&void 0!==c[0]?c[0]:null,n(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(null);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("div",{children:[Object(p.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(p.jsx)("a",{href:"/restaurants",className:"navbar-brand",children:"Restaurant Reviews"}),Object(p.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(u.b,{to:"/restaurants",className:"nav-link",children:"Restaurants"})}),Object(p.jsx)("li",{className:"nav-item",children:c?Object(p.jsxs)("a",{onClick:function(){return i.apply(this,arguments)},className:"nav-link",style:{cursor:"pointer"},children:["Logout ",c.name]}):Object(p.jsx)(u.b,{to:"/login",className:"nav-link",children:"Login"})})]})]}),Object(p.jsx)("div",{className:"container mt-3",children:Object(p.jsxs)(b.c,{children:[Object(p.jsx)(b.a,{exact:!0,path:["/","/restaurants"],component:N}),Object(p.jsx)(b.a,{path:"/restaurants/:id/review",render:function(e){return Object(p.jsx)(f,Object(o.a)(Object(o.a)({},e),{},{user:c}))}}),Object(p.jsx)(b.a,{path:"/restaurants/:id",render:function(e){return Object(p.jsx)(g,Object(o.a)(Object(o.a)({},e),{},{user:c}))}}),Object(p.jsx)(b.a,{path:"/login",render:function(e){return Object(p.jsx)(y,Object(o.a)(Object(o.a)({},e),{},{login:s}))}})]})})]})};r.a.render(Object(p.jsx)(u.a,{children:Object(p.jsx)(k,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.9b76a3c2.chunk.js.map